{% extends "_layouts/cp" %}

{% set title = "Audit Log"|t %}

{% set content %}
<div class="tableview">
    <table class="data fullwidth" id="history">
        <thead>
            <tr>
                <th scope="col" data-attribute="type">{{ "Type"|t }}</th>
                <th scope="col" data-attribute="user">{{ "User"|t }}</th>
                <th scope="col" data-attribute="origin">{{ "Origin"|t }}</th>
                <th scope="col" data-attribute="modified">{{ "Modified"|t }}</th>
                <th scope="col" data-attribute="changes">{{ "Changes"|t }}</th>
            </tr>
        </thead>
        <tbody>
        {% for item in craft.auditLog.log %}
            <tr>
                <td scope="row" data-title="{{ 'Type'|t }}">
                    <div class="element" data-id="{{ item.id }}" data-status="{{ item.status }}" data-label="{{ item.type }}">
                        <div class="label">
                            <span class="status {{ item.status }}"></span>
                            <span class="title">
                                {{ item.type }}
                            </span>
                        </div>
                    </div>                
                </td>
                <td data-title="{{ 'User'|t }}">
                    <a href="{{ url('users/' ~ item.user.id) }}">{{ item.user.username }}</a>
                </td>
                <td data-title="{{ 'Origin'|t }}">
                    {{ item.origin }}
                </td>
                <td data-title="{{ 'Modified'|t }}">
                    {{ item.dateUpdated|datetime }}
                </td>
                <td data-title="{{ 'Changes'|t }}">
                    <a class="btn" href="auditlog/{{ item.id }}">{{ "View"|t }}</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endset %}